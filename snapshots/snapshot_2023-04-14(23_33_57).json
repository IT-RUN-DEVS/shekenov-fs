{"test/f_sys.py": {"1": "import os\n", "2": "from pathlib import Path\n", "3": "from zipfile import ZipFile\n", "4": "from datetime import date, datetime\n", "5": "\n", "6": "# \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430 (create).\n", "7": "def create(name, text = None):\n", "8": "    while os.path.exists(name):\n", "9": "        name = input( '\u0422\u0430\u043a\u043e\u0439 \u0444\u0430\u0439\u043b \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u043e\u0435 \u0438\u043c\u044f \u0444\u0430\u0439\u043b\u0430:')\n", "10": "\n", "11": "    if text is not None:\n", "12": "        with open(name, 'w+') as f:\n", "13": "            f.write(text)\n", "14": "        print(f'\u0424\u0430\u0439\u043b {name} \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d \u0438 \u0432 \u043d\u0435\u0433\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b \u0434\u0430\u043d\u043d\u044b\u0435: {text}')\n", "15": "    else:\n", "16": "        open(name, 'w+')\n", "17": "        print(f'\u0424\u0430\u0439\u043b {name} \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d')\n", "18": "    return name\n", "19": "\n", "20": "\n", "21": "\n", "22": "# \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u0432\u044b\u0432\u043e\u0434\u0430 \u0441\u043f\u0438\u0441\u043a\u0430 \u0444\u0430\u0439\u043b\u043e\u0432 \u0438 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0439 (list).\n", "23": "def list(directory = None):\n", "24": "    if directory is not None:\n", "25": "        while not os.path.exists(directory):\n", "26": "            directory = input('\u0422\u0430\u043a\u043e\u0439 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u0443\u044e:')\n", "27": "    files = os.listdir(directory)\n", "28": "    # \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u043a \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438 \"/\", \u0434\u043b\u044f \u0443\u0434\u043e\u0431\u0441\u0442\u0432\u0430 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430\n", "29": "    for i in range(len(files)):\n", "30": "        if os.path.isdir(files[i]):\n", "31": "            files[i] += '/'\n", "32": "    print(files)\n", "33": "    return  files\n", "34": "\n", "35": "\n", "36": "# \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u0430 (copy).\n", "37": "def copy(src, dst = None):\n", "38": "    same_files = []\n", "39": "    # \u0435\u0441\u043b\u0438 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442 dst \u043f\u0435\u0440\u0435\u0434\u0430\u043d, \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c \u0435\u0433\u043e \u0441 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u0444\u0430\u0439\u043b\u0430\u043c\u0438 \u043d\u0430 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f\n", "40": "    if dst is not None:\n", "41": "        if dst in os.listdir():\n", "42": "            dst = input('\u0424\u0430\u0439\u043b \u0441 \u0442\u0430\u043a\u0438\u043c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435:')\n", "43": "        Path(dst).write_bytes(Path(src).read_bytes())\n", "44": "    # \u0435\u0441\u043b\u0438 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442 \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0442\u043e \u043a\u043e\u043f\u0438\u0440\u0443\u0435\u043c \u0444\u0430\u0439\u043b \u0441 \u0438\u0441\u043a\u043e\u043d\u043d\u044b\u043c \u043d\u0430\u0437\u044b\u0432\u0430\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 + \"\u043a\u043e\u043f\u0438\u044f_\u0447\u0438\u0441\u043b\u043e\"\n", "45": "    else:\n", "46": "        pre_dst = src.split('.')[0]+'_\u043a\u043e\u043f\u0438\u044f_'\n", "47": "        for i in os.listdir(): # \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u043d\u0430 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435 \u0447\u0430\u0441\u0442\u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0439 \u0434\u0440\u0443\u0433\u0438\u0445 \u0444\u0430\u0439\u043b\u043e\u0432\n", "48": "            if os.path.isfile(i):\n", "49": "                if pre_dst in i:\n", "50": "                  same_files.append(i.split('.')[0]) # \u0441\u043f\u0438\u0441\u043e\u043a \u0438\u0437 \u0444\u0430\u0439\u043b\u043e\u0432 \u0441 \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u043e \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u043c\u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f\u043c\u0438\n", "51": "        numbers = []\n", "52": "        if same_files:\n", "53": "            for i in same_files:\n", "54": "                try:\n", "55": "                    numbers.append(int(i[len(pre_dst):])) # \u043f\u044b\u0442\u0430\u0435\u043c\u044f \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0446\u0438\u0444\u0440\u0443 \u043f\u043e\u0441\u043b\u0435 \u0447\u0430\u0441\u0442\u0438\u0447\u043d\u043e\u0433\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f\n", "56": "                except:\n", "57": "                    continue\n", "58": "        if numbers:\n", "59": "            dst = pre_dst + str(max(numbers) + 1) + '.' +  src.split('.')[-1] # \u0432\u044b\u0442\u0430\u0441\u043a\u0438\u0432\u0430\u0435\u043c \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u0447\u0438\u0441\u043b\u043e \u043f\u043e\u0441\u043b\u0435 \u0447\u0430\u0442\u0438\u0447\u043d\u043e\u0433\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u043e\u0432 \u0438 \u0441\u043e\u0437\u0434\u0430\u0435\u043c \u043d\u043e\u0432\u044b\u0439 \u0444\u0430\u0439\u043b \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c \u0438 \u0446\u0438\u0444\u0440\u043e\u0439 \u0431\u043e\u043b\u044c\u0448\u0435\u0439 \u043d\u0430 1\n", "60": "        else:\n", "61": "            dst = pre_dst + '1' + '.' +  src.split('.')[-1] # \u0435\u0441\u043b\u0438 \u0442\u0430\u043a\u043e\u0432\u044b\u0445 \u043d\u0435\u0442, \u0442\u043e \u0441\u043e\u0437\u0434\u0430\u0435\u043c \u0444\u0430\u0439\u043b \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \"\u0444\u0430\u0439\u043b_\u043a\u043e\u043f\u0438\u044f_1.\u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435\"\n", "62": "        Path(dst).write_bytes(Path(src).read_bytes())\n", "63": "    return dst\n", "64": "\n", "65": "\n", "66": "# \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u0430 (move).\n", "67": "def move(src, dst = None):\n", "68": "    file_name = src.split('/')[-1] # \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 \u0432 src\n", "69": "    if dst and dst != ' ':\n", "70": "        directory = dst.split('/')\n", "71": "        # \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043d\u0430 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u0444\u0430\u0439\u043b\u0430 \u0432 dst\n", "72": "        if '.' not in  directory[-1] or directory[-1] == '':\n", "73": "            directory = '/'.join(directory)\n", "74": "            if directory[-1] != '/':\n", "75": "                directory += '/'\n", "76": "        else:\n", "77": "            file_name = directory[-1] # \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430 \u0432 dst\n", "78": "            directory[-1] = '' # \u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0434\u0438\u0440\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0439\n", "79": "            directory = '/'.join(directory)\n", "80": "        # \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043d\u0430 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u0438\u0440\u0435\u0435\u043a\u0442\u043e\u0440\u0438\u0438\n", "81": "        if os.path.exists(directory):\n", "82": "            os.rename(src, (directory + file_name))\n", "83": "        else:\n", "84": "            while not os.path.exists(directory):\n", "85": "                directory = input('\u0423\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0439 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430:')\n", "86": "            os.rename(src, (directory + file_name))\n", "87": "    # \u0435\u0441\u043b\u0438 dst \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d \u0438\u043b\u0438 \u0440\u0430\u0432\u0435\u043d \" \", \u0442\u043e \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0430\u0435\u043c \u0435\u0433\u043e \u0432 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044e \u0433\u0434\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442\u0441\u044f \u0441\u043a\u0440\u0438\u043f\u0442\n", "88": "    else:\n", "89": "        directory = os.path.abspath(os.curdir) + '/'\n", "90": "        os.rename(src, (directory + file_name))\n", "91": "\n", "92": "\n", "93": "# \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043d\u043e\u0432\u043e\u0439 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b (init).\n", "94": "def init(directories):\n", "95": "    while os.path.exists(directories):\n", "96": "        directories = input('\u0422\u0430\u043a\u0430\u044f \u0444\u0430\u0439\u043b\u043e\u0432\u0430\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u0443\u044e:')\n", "97": "    os.makedirs(directories)\n", "98": "\n", "99": "\n", "100": "# \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0441\u043d\u0438\u043c\u043a\u0430 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b (snapshot).\n", "101": "def snapshot(directories):\n", "102": "    snap_name = 'snapshot_' + f'{date.today()}({datetime.now().hour}_{datetime.now().minute})'\n", "103": "    while not os.path.exists(directories):\n", "104": "        directories = input('\u0422\u0430\u043a\u043e\u0439 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437:')\n", "105": "    snap = {}\n", "106": "    for each in list(directories):\n", "107": "        if os.path.isfile(each):\n", "108": "            file = open(each, 'r')\n", "109": "            l_n = 1\n", "110": "            for line in file:\n", "111": "                snap[each][l_n] = line\n", "112": "                l_n += 1\n", "113": "    new_snapshot = create(snap_name, snap)\n", "114": "    move(new_snapshot, 'snapshots/')\n", "115": "\n", "116": "\n", "117": "\n", "118": "\n", "119": "# \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0439 \u043a\u043e\u043f\u0438\u0438 \u0432\u0441\u0435\u0439 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b (backup).\n", "120": "def backup(directories):\n", "121": "    # \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043d\u0430 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b\n", "122": "    while not os.path.exists(directories):\n", "123": "        directories = input('\u0422\u0430\u043a\u043e\u0439 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u0443\u044e:')\n", "124": "\n", "125": "    # \u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0430\u0440\u0445\u0438\u0432 \u0434\u0438\u0440\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438\n", "126": "    backup_name = input('\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0440\u0435\u0437\u0435\u0440\u0432\u043d\u043e\u0439 \u043a\u043e\u043f\u0438\u0438:') + '.zip'\n", "127": "    while backup_name in list('backups/'):\n", "128": "        backup_name = input('\u0411\u0435\u043a\u0430\u043f \u0441 \u0442\u0430\u043a\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442, \u043f\u0440\u0438\u0434\u0443\u043c\u0430\u0439\u0442\u0435 \u0434\u0440\u0443\u0433\u043e\u0439:') + '.zip'\n", "129": "    with ZipFile(backup_name, \"w\") as myzip:\n", "130": "        myzip.write(directories)\n", "131": "    # \u041f\u0435\u0440\u0435\u043c\u0435\u0449\u0430\u0435\u043c \u0431\u0435\u043a\u0430\u043f \u0432 \u043f\u0430\u043f\u043a\u0443 backups\n", "132": "    move(backup_name, 'backups/')\n", "133": "    print(f\"\u0411\u0435\u043a\u0430\u043f '{backup_name}' \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d, \u0438 \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d \u0432 \u043f\u0430\u043f\u043a\u0443 'backups/'\")\n", "134": "\n", "135": "\n", "136": "\n", "137": "\n", "138": "\n", "139": "\n", "140": "\n", "141": "\n", "142": "\n", "143": "\n", "144": "\n", "145": "\n", "146": "snapshot('test/')\n", "147": "# backup('test')\n", "148": "# create('hello.txt')\n", "149": "# list()\n", "150": "# copy('', 'backup',)\n", "151": "# move('test/test_2/hello_\u043e\u043f\u0438\u044f_2.txt','')\n", "152": "# move('hello_\u043a\u043e\u043f\u0438\u044f_3.txt', 'test/test_2/index.txt')\n", "153": "# init('file/file1/file3')\n", "154": "# {\"test1234\":\n", "155": "#      {\"95\": \"# create('hello.txt')\"}}\n"}, "test/asdf.txt": {}, "test/test1/tesadf.txt": {}}